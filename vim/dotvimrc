" Vim Configuration File
" ~/.vimrc
" Maintained by Kevin Gisi
" Version 1.0.5

" Call Pathogen
call pathogen#infect()

" General Options
syntax on
set bg=dark
set autoindent

set nofoldenable

" Parameters
set number
set softtabstop=2
set shiftwidth=2
set expandtab
set pastetoggle=<F12>
set splitright

" Highlighting
set hlsearch
set incsearch
nnoremap <silent> <Space> :nohlsearch<Bar>:echo<CR>
"hi Comment cterm=none ctermfg=6 ctermbg=none
"hi Directory ctermfg=6
"hi NonText ctermfg=0

" Confuse the Colons
"nnoremap ; :
"nnoremap : ;

" Shortcuts
nmap <leader>d :NERDTreeToggle<cr>
nmap <leader>r :!rake<cr>
nmap <leader>c :!wc -w %<cr>
nmap <leader>w :VimroomToggle<cr>:echo<cr>
nmap <leader>e :vsp! ~/.vimrc<cr>
nmap <leader>s :execute 'vsp! ~/.vim/bundle/snipmate.vim/snippets/' . &filetype . '.snippets'<cr>
nmap <leader>g :
nmap <leader>p :!textplay -p %<cr>
nmap <leader>f gqq
nmap <leader>x yitvatp
nmap <leader>- :r! date<cr>
nmap <leader><cr> :!./bin.sh<cr><cr>
map <leader>/ :NERDCommenterToggle<cr>
nmap <leader><space> :R<cr>

" Force Reload .vimrc on edit
autocmd! bufwritepost .vimrc source ~/.vimrc
autocmd! bufwritepost *.snippets call ReloadAllSnippets()

inoremap <Left>   <NOP>
inoremap <Right>  <NOP>
inoremap <Up>     <NOP>
inoremap <Down>   <NOP>

" Shortcut Escape
inoremap jj       <Esc>

" Color Scheme
colorscheme distinguished

" IDIOMS TO START USING
" :w !sudo tee %      # Save the file with sudo mode

" File-specific settings
autocmd BufRead,BufNewFile *.txt set nonumber
au BufRead,BufNewFile *.fountain    set filetype=fountain
au BufRead,BufNewFile Guardfile     set filetype=ruby
au BufRead,BufNewFile Gemfile       set filetype=ruby
au BufRead,BufNewFile config.ru     set filetype=ruby
au BufRead,BufNewFile *.ad          set filetype=asciidoc

" Remove whitespace
autocmd BufWritePre * :%s/\s\+$//e

function! WrapForTmux(s)
  if !exists('$TMUX')
    return a:s
  endif

  let tmux_start = "\<Esc>Ptmux;"
  let tmux_end = "\<Esc>\\"

  return tmux_start . substitute(a:s, "\<Esc>", "\<Esc>\<Esc>", 'g') . tmux_end
endfunction

let &t_SI .= WrapForTmux("\<Esc>[?2004h")
let &t_EI .= WrapForTmux("\<Esc>[?2004l")

function! XTermPasteBegin()
  set pastetoggle=<Esc>[201~
  set paste
  return ""
endfunction

inoremap <special> <expr> <Esc>[200~ XTermPasteBegin()
